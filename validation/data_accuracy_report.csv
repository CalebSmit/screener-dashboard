Ticker,Field,Issue,Expected,Actual,Severity,Detail
AAPL,sector,SECTOR_NAME_MISMATCH,Wikipedia GICS: 'Information Technology',yfinance: 'Technology',CRITICAL,"yfinance returns 'Technology' but Wikipedia/GICS uses 'Information Technology'. Stocks may be assigned to wrong sector groups for percentile ranking. The screener falls back to Wikipedia sector when yfinance returns 'Unknown', but NOT when yfinance returns a valid but differently-named sector."
JPM,sector,SECTOR_NAME_MISMATCH,Wikipedia GICS: 'Financials',yfinance: 'Financial Services',CRITICAL,"yfinance returns 'Financial Services' but Wikipedia/GICS uses 'Financials'. Stocks may be assigned to wrong sector groups for percentile ranking. The screener falls back to Wikipedia sector when yfinance returns 'Unknown', but NOT when yfinance returns a valid but differently-named sector."
MSFT,sector,SECTOR_NAME_MISMATCH,Wikipedia GICS: 'Information Technology',yfinance: 'Technology',CRITICAL,"yfinance returns 'Technology' but Wikipedia/GICS uses 'Information Technology'. Stocks may be assigned to wrong sector groups for percentile ranking. The screener falls back to Wikipedia sector when yfinance returns 'Unknown', but NOT when yfinance returns a valid but differently-named sector."
TSLA,sector,SECTOR_NAME_MISMATCH,Wikipedia GICS: 'Consumer Discretionary',yfinance: 'Consumer Cyclical',CRITICAL,"yfinance returns 'Consumer Cyclical' but Wikipedia/GICS uses 'Consumer Discretionary'. Stocks may be assigned to wrong sector groups for percentile ranking. The screener falls back to Wikipedia sector when yfinance returns 'Unknown', but NOT when yfinance returns a valid but differently-named sector."
AAPL,enterpriseValue (cash),TOTALCASH_VS_BS_CASH_MISMATCH,"BS Cash & Equivalents = 35,934,000,000","info['totalCash'] = 66,907,000,832",MEDIUM,"info['totalCash'] includes short-term investments (66,907,000,832) but BS 'Cash And Cash Equivalents' is just cash (35,934,000,000). Difference: 30,973,000,832. When EV fallback uses info['totalCash'] and ROIC uses cash_bs, the invested capital calculation may be inconsistent."
JPM,enterpriseValue (cash),TOTALCASH_VS_BS_CASH_MISMATCH,"BS Cash & Equivalents = 343,338,000,000","info['totalCash'] = 1,287,710,048,256",MEDIUM,"info['totalCash'] includes short-term investments (1,287,710,048,256) but BS 'Cash And Cash Equivalents' is just cash (343,338,000,000). Difference: 944,372,048,256. When EV fallback uses info['totalCash'] and ROIC uses cash_bs, the invested capital calculation may be inconsistent."
XOM,enterpriseValue (cash),TOTALCASH_VS_BS_CASH_MISMATCH,"BS Cash & Equivalents = 23,029,000,000","info['totalCash'] = 10,680,999,936",MEDIUM,"info['totalCash'] includes short-term investments (10,680,999,936) but BS 'Cash And Cash Equivalents' is just cash (23,029,000,000). Difference: 12,348,000,064. When EV fallback uses info['totalCash'] and ROIC uses cash_bs, the invested capital calculation may be inconsistent."
MSFT,enterpriseValue (cash),TOTALCASH_VS_BS_CASH_MISMATCH,"BS Cash & Equivalents = 30,242,000,000","info['totalCash'] = 89,461,997,568",MEDIUM,"info['totalCash'] includes short-term investments (89,461,997,568) but BS 'Cash And Cash Equivalents' is just cash (30,242,000,000). Difference: 59,219,997,568. When EV fallback uses info['totalCash'] and ROIC uses cash_bs, the invested capital calculation may be inconsistent."
TSLA,enterpriseValue (cash),TOTALCASH_VS_BS_CASH_MISMATCH,"BS Cash & Equivalents = 16,513,000,000","info['totalCash'] = 44,059,000,832",MEDIUM,"info['totalCash'] includes short-term investments (44,059,000,832) but BS 'Cash And Cash Equivalents' is just cash (16,513,000,000). Difference: 27,546,000,832. When EV fallback uses info['totalCash'] and ROIC uses cash_bs, the invested capital calculation may be inconsistent."
AAPL,dividend_yield,DIVIDEND_YIELD_ALREADY_PERCENTAGE,dividendYield=0.41 (already in %),portfolio_constructor.py line 250 multiplies by 100 again,HIGH,"yfinance v0.2.66 returns dividendYield as a percentage (0.41%), but portfolio_constructor.py multiplies by 100 again ('avg_div = np.average(divs, weights=weights) * 100'). This would show 41.0% instead of 0.41%. However, 'dividend_yield' column is never populated in the DataFrame so this code path is currently dead/unused."
JPM,dividend_yield,DIVIDEND_YIELD_ALREADY_PERCENTAGE,dividendYield=1.98 (already in %),portfolio_constructor.py line 250 multiplies by 100 again,HIGH,"yfinance v0.2.66 returns dividendYield as a percentage (1.98%), but portfolio_constructor.py multiplies by 100 again ('avg_div = np.average(divs, weights=weights) * 100'). This would show 198.0% instead of 1.98%. However, 'dividend_yield' column is never populated in the DataFrame so this code path is currently dead/unused."
XOM,dividend_yield,DIVIDEND_YIELD_ALREADY_PERCENTAGE,dividendYield=2.78 (already in %),portfolio_constructor.py line 250 multiplies by 100 again,HIGH,"yfinance v0.2.66 returns dividendYield as a percentage (2.78%), but portfolio_constructor.py multiplies by 100 again ('avg_div = np.average(divs, weights=weights) * 100'). This would show 278.0% instead of 2.78%. However, 'dividend_yield' column is never populated in the DataFrame so this code path is currently dead/unused."
MSFT,dividend_yield,DIVIDEND_YIELD_ALREADY_PERCENTAGE,dividendYield=0.91 (already in %),portfolio_constructor.py line 250 multiplies by 100 again,HIGH,"yfinance v0.2.66 returns dividendYield as a percentage (0.91%), but portfolio_constructor.py multiplies by 100 again ('avg_div = np.average(divs, weights=weights) * 100'). This would show 91.0% instead of 0.91%. However, 'dividend_yield' column is never populated in the DataFrame so this code path is currently dead/unused."
AAPL,beta,BETA_DIFFERS_FROM_YFINANCE,yfinance info['beta']=1.11,Screener computed=1.31,LOW,Screener computes beta from daily returns (252-day window) while yfinance info['beta'] uses a different methodology/window. Difference of 0.20 is expected and not a bug.
XOM,beta,BETA_DIFFERS_FROM_YFINANCE,yfinance info['beta']=0.36,Screener computed=0.53,LOW,Screener computes beta from daily returns (252-day window) while yfinance info['beta'] uses a different methodology/window. Difference of 0.18 is expected and not a bug.
MSFT,beta,BETA_DIFFERS_FROM_YFINANCE,yfinance info['beta']=1.08,Screener computed=0.90,LOW,Screener computes beta from daily returns (252-day window) while yfinance info['beta'] uses a different methodology/window. Difference of 0.18 is expected and not a bug.
TSLA,beta,BETA_DIFFERS_FROM_YFINANCE,yfinance info['beta']=1.89,Screener computed=2.26,LOW,Screener computes beta from daily returns (252-day window) while yfinance info['beta'] uses a different methodology/window. Difference of 0.37 is expected and not a bug.
ALL,enterpriseValue (fallback),MISSING_DATA_DEFAULTS_TO_ZERO,EV = MC + Debt - Cash (all components required),"Missing debt/cash defaults to 0, producing biased EV",MEDIUM,"When totalDebt or totalCash is missing from yfinance, the fallback EV calculation defaults these to 0. This systematically biases EV downward (missing debt) or upward (missing cash). Consider using NaN for EV when key components are missing, rather than assuming they're zero."
ALL,sustainable_growth (dividends),MISSING_DIVIDENDS_ASSUMES_ZERO,Should use NaN or lookup dividendRate from info,Defaults dividendsPaid to 0 (100% retention),LOW,"When dividendsPaid is missing from cashflow statement, retention ratio defaults to 100%. For known dividend payers, this inflates sustainable growth."
N/A,yfinance version,VERSION_MISMATCH,requirements.txt pins 0.2.28,Installed: 0.2.66,MEDIUM,"requirements.txt pins yfinance==0.2.28 but 0.2.66 is installed. API behavior may differ between versions. Key changes in 0.2.36+: dividendYield format changed, some info keys renamed, earnings_history behavior may differ."
XOM,ev_ebitda (EBIT fallback),EBIT_EBITDA_MATERIAL_DIFFERENCE,"EBITDA=73,311,000,000","EBIT=49,869,000,000 (used as fallback)",HIGH,"When EBITDA is missing, screener falls back to EBIT (line 493-494). EBIT/EBITDA ratio is 0.68 for XOM. D&A of 23,442,000,000 would make the EV/EBIT ratio 1% of what EV/EBITDA would be. The metric is labeled 'ev_ebitda' but may actually be EV/EBIT for some stocks."
